const h="/apps/abbott/costoefectividad-influvac";class g{currentView="view1";formData=null;mainContainer=null;constructor(){this.mainContainer=document.getElementById("main-container"),this.initializeNavigation(),this.initializeFormHandler(),this.initializeCustomEvents()}initializeNavigation(){document.querySelectorAll(".view-nav-btn").forEach(e=>{e.addEventListener("click",o=>{const n=o.target,i=n.getAttribute("data-view"),l=n.getAttribute("data-bg");i&&this.switchView(i,l)})})}initializeFormHandler(){const t=document.getElementById("modelParametersForm");t&&t.addEventListener("submit",e=>{e.preventDefault(),this.handleFormSubmit(t)})}initializeCustomEvents(){document.addEventListener("switchToView",t=>{console.log("Cambiando a la vista:",t.detail.viewId);const{viewId:e}=t.detail;let o="banner2";switch(e){case"view2":o="banner3";break;case"view3":o="banner4";break;case"view4":o="banner5";break}this.switchView(e,o)})}switchView(t,e){if(e&&this.mainContainer){const i=h;this.mainContainer.style.backgroundImage=`url('${i}/img/bg/${e}.webp')`}const o=document.getElementById(this.currentView);o&&(o.classList.add("hidden"),o.classList.remove("active"));const n=document.getElementById(t);n&&(n.classList.remove("hidden"),n.classList.add("active")),this.currentView=t,this.updateLogo(t),this.loadViewContent(t)}handleFormSubmit(t){this.formData=new FormData(t),this.calculateResults(),console.log("Formulario procesado. Datos listos para visualización.")}calculateResults(){setTimeout(()=>{const t=document.getElementById("resultado-ahorro-total"),e=document.getElementById("resultado-roi");t&&(t.textContent="$2,500,000,000"),e&&(e.textContent="320%");const o=document.getElementById("resultado-costo-beneficio"),n=document.getElementById("resultado-costo-caso-evitado"),i=document.getElementById("resultado-efectividad");o&&(o.textContent="3.2:1"),n&&(n.textContent="$125,000"),i&&(i.textContent="85%");const l=document.getElementById("casos-h1n1"),s=document.getElementById("casos-h3n2"),r=document.getElementById("casos-b-victoria"),c=document.getElementById("casos-b-yamagata");l&&(l.textContent="45"),s&&(s.textContent="38"),r&&(r.textContent="32"),c&&(c.textContent="33")},500)}loadViewContent(t){switch(t){case"view3":this.loadChartsView3();break;case"view4":this.loadChartsView4();break}}loadChartsView3(){const t=document.getElementById("chart-temporal");t&&(t.innerHTML='<p class="text-center text-sm text-gray-500">Análisis temporal cargado</p>')}loadChartsView4(){const t=()=>{typeof window.Chart<"u"?this.createInfluenzaCharts():setTimeout(t,100)};t()}createInfluenzaCharts(){const t=Array.from({length:365},(a,u)=>u+1),e=t.map(a=>Math.max(0,Math.sin(a*.02)*15+Math.random()*5)),o=t.map(a=>Math.max(0,Math.sin(a*.015)*12+Math.random()*3)),n=t.map(a=>Math.max(0,Math.sin(a*.025)*10+Math.random()*4)),i=t.map(a=>Math.max(0,Math.sin(a*.018)*8+Math.random()*2)),l=t.map(a=>Math.max(0,Math.sin(a*.022)*6+Math.random()*3)),s={activos:e.map(a=>a*2.5),ah1n1:o.map(a=>a*2.2),ah3n2:n.map(a=>a*2.8),victoria:i.map(a=>a*2.3),yamagata:l.map(a=>a*2.6)},r={activos:e.map(a=>a*.8),ah1n1:o.map(a=>a*.7),ah3n2:n.map(a=>a*.9),victoria:i.map(a=>a*.6),yamagata:l.map(a=>a*.8)},c={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{usePointStyle:!0,padding:15,font:{size:11}}}},scales:{x:{title:{display:!0,text:"Días del año",font:{size:12,weight:"bold"}},ticks:{maxTicksLimit:12}},y:{title:{display:!0,text:"Número de casos",font:{size:12,weight:"bold"}},beginAtZero:!0}}},d=document.getElementById("chart-no-vacunar");d&&new window.Chart(d,{type:"line",data:{labels:t,datasets:[{label:"Activos",data:s.activos,borderColor:"#FF6B6B",backgroundColor:"#FF6B6B20",tension:.3,fill:!0},{label:"AH1N1",data:s.ah1n1,borderColor:"#4ECDC4",backgroundColor:"#4ECDC420",tension:.3,fill:!0},{label:"AH3N2",data:s.ah3n2,borderColor:"#45B7D1",backgroundColor:"#45B7D120",tension:.3,fill:!0},{label:"Victoria",data:s.victoria,borderColor:"#F7DC6F",backgroundColor:"#F7DC6F20",tension:.3,fill:!0},{label:"Yamagata",data:s.yamagata,borderColor:"#BB8FCE",backgroundColor:"#BB8FCE20",tension:.3,fill:!0},{label:"No Vacunal",data:t.map(()=>0),borderColor:"#E8E8E8",backgroundColor:"#E8E8E820",tension:.3,fill:!0}]},options:c});const m=document.getElementById("chart-vacunacion-tetravalente");m&&new window.Chart(m,{type:"line",data:{labels:t,datasets:[{label:"Activos",data:r.activos,borderColor:"#FF6B6B",backgroundColor:"#FF6B6B20",tension:.3,fill:!0},{label:"AH1N1",data:r.ah1n1,borderColor:"#4ECDC4",backgroundColor:"#4ECDC420",tension:.3,fill:!0},{label:"AH3N2",data:r.ah3n2,borderColor:"#45B7D1",backgroundColor:"#45B7D120",tension:.3,fill:!0},{label:"Victoria",data:r.victoria,borderColor:"#F7DC6F",backgroundColor:"#F7DC6F20",tension:.3,fill:!0},{label:"Yamagata",data:r.yamagata,borderColor:"#BB8FCE",backgroundColor:"#BB8FCE20",tension:.3,fill:!0},{label:"No Vacunal",data:t.map(()=>Math.random()*2),borderColor:"#E8E8E8",backgroundColor:"#E8E8E820",tension:.3,fill:!0}]},options:c})}updateLogo(t){const e=document.getElementById("dynamic-logo");if(!e)return;const o=e.getAttribute("data-white-logo"),n=e.getAttribute("data-color-logo");!o||!n||(t==="view1"||t==="view4"?e.src=o:e.src=n)}}document.addEventListener("DOMContentLoaded",()=>{new g});
